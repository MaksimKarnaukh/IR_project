from test import calculatePrecisionAndRecallfrom utils import *from related_doc_retrieval import *from gui import run_guifrom src import variablesdef return_similar_documents(doc_dict, query: str, by_title: bool = False, num_results: int = 10):    documents = list(doc_dict.values())    document_titles = list(doc_dict.keys())    retrieval_system = RelatedDocumentsRetrieval(document_titles, documents)    retrieval_system.tfidf_matrix = retrieval_system.vectorize_documents()    # todo write matrix away to csv and then add a check for this file, we only need to compute csr_matrix once    similar_documents_titles, similar_documents = [], []    if by_title:        query_document = doc_dict[query]        similar_documents_titles, similar_documents, scores = retrieval_system.retrieve_similar_documents(query_document, query, num_results)    else:        similar_documents_titles, similar_documents, scores = retrieval_system.retrieve_similar_documents(query, "", num_results)    print("Query Document:", query)    print("Similar Documents:")    for i, doc in enumerate(similar_documents_titles, 1):        print(f"{i}. {doc}")    # filepath_path_gt = 'input/gt'    if by_title:        title = query        d = read_gt(variables.filepath_path_gt)  # Read ground truth        print(d[title])        expected = list(d[title].keys())        par = calculatePrecisionAndRecall(expected, similar_documents_titles)        print("fraction of relevant instances among the retrieved instances: ", par[0])        print("fraction of relevant instances that were retrieved: ", par[1])if __name__ == '__main__':    # doc_dict = getDocDict(filepath_video_games=filepath_video_games, csv_doc_dict=csv_doc_dict)    #    # title = "Assassin's Creed IV: Black Flag"    # query_document = doc_dict[title]    #    # return_similar_documents(doc_dict, query=title, by_title=True, num_results=5)    # run_gui()    l = ['data science is one of the most important fields of science',     'this is one of the best data science courses',     'data scientists analyze data']    q = ['data scientists is analyze courses data space']    document_titles = ["doc1", "doc2", "doc3"]    documents = l    retrieval_system = RelatedDocumentsRetrieval(document_titles, documents)    tfidf_matrix = retrieval_system.vectorize_documents()    similar_documents_titles, similar_documents, scores = retrieval_system.retrieve_similar_documents(q[0], "", 5, is_query_preprocessed=True)    assert similar_documents_titles == ['doc3', 'doc2', 'doc1'] and scores == [0.8947309777247088, 0.47883471428566104, 0.24023010945979534]